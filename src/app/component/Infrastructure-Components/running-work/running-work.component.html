<div class="card shadow">
    <div class="card-body">
      <!-- <div class="container-fluid"> -->
      <mat-tab-group (selectedTabChange)="selectedTabValue($event)">
        <mat-tab label="Running Works Summary">
          <ng-template matTabContent>
            <!-- <div class="card shadow"> -->
              <div class="w-100 mt-1 pb-0">
                  <!-- #e2e3e5 -->
                  <h3 class="bold text-light bg-dark" style="font-size: large;">Running Works Summary</h3>
                </div>
            <div class="card-body pt-0">
              <div class="container-fluid  p-1">
                <div class="row">
                  <div class="col-lg-6 col-md-6 mb-2 border rounded" *ngIf="RunningWorkDataGTotal.length > 0">
                    <div class="chart-container">
                      <apx-chart [series]="chartOptions.series" [chart]="chartOptions.chart"
                        [dataLabels]="chartOptions.dataLabels" [plotOptions]="chartOptions.plotOptions"
                        [xaxis]="chartOptions.xaxis" [stroke]="chartOptions.stroke"
                        [fill]="chartOptions.fill" [yaxis]="chartOptions.yaxis"
                        [title]="chartOptions.title" [tooltip]="chartOptions.tooltip"
                        [legend]="chartOptions.legend"></apx-chart>
  
  
                    </div>
                  </div>
                  <div class="col-lg-6 col-md-6 mb-2 border rounded" *ngIf="RunningWorkDataDivision.length > 0">
                    <div class="chart-container">
                      <apx-chart [series]="chartOptions1.series" [chart]="chartOptions1.chart"
                        [dataLabels]="chartOptions1.dataLabels" [plotOptions]="chartOptions1.plotOptions"
                        [xaxis]="chartOptions1.xaxis" [stroke]="chartOptions1.stroke" [fill]="chartOptions1.fill"
                        [yaxis]="chartOptions1.yaxis" [title]="chartOptions1.title" [tooltip]="chartOptions1.tooltip"
                        [legend]="chartOptions1.legend"></apx-chart>
                    </div>
                  </div>
                </div>
                <div class="row">
                  <div class="col-lg-6 col-md-6 mb-2 border rounded" *ngIf="RunningWorkDataScheme.length > 0">
                    <div class="chart-container">
                      <apx-chart [series]="chartOptions2.series" [chart]="chartOptions2.chart"
                        [dataLabels]="chartOptions2.dataLabels" [plotOptions]="chartOptions2.plotOptions"
                        [xaxis]="chartOptions2.xaxis" [stroke]="chartOptions2.stroke" [fill]="chartOptions2.fill"
                        [yaxis]="chartOptions2.yaxis" [title]="chartOptions2.title" [tooltip]="chartOptions2.tooltip"
                        [legend]="chartOptions2.legend"></apx-chart>
                    </div>
                  </div>
                  <div class="col-lg-6 col-md-6 mb-2 border rounded" *ngIf="RunningWorkDataDistrict.length > 0">
                    <div class="chart-container">
                      <apx-chart [series]="chartOptions3.series" [chart]="chartOptions3.chart"
                        [dataLabels]="chartOptions3.dataLabels" [plotOptions]="chartOptions3.plotOptions"
                        [xaxis]="chartOptions3.xaxis" [stroke]="chartOptions3.stroke" [fill]="chartOptions3.fill"
                        [yaxis]="chartOptions3.yaxis" [title]="chartOptions3.title"
                        [tooltip]="chartOptions3.tooltip" [legend]="chartOptions3.legend"></apx-chart>
                    </div>
                  </div>
                  <div class="col-lg-6 col-md-6 mb-2 border rounded" *ngIf="RunningWorkDataContractor.length > 0">
                    <div class="chart-container">
                      <apx-chart [series]="chartOptions4.series" [chart]="chartOptions4.chart"
                        [dataLabels]="chartOptions4.dataLabels" [plotOptions]="chartOptions4.plotOptions"
                        [xaxis]="chartOptions4.xaxis" [stroke]="chartOptions4.stroke" [fill]="chartOptions4.fill"
                        [yaxis]="chartOptions4.yaxis" [title]="chartOptions4.title"
                        [tooltip]="chartOptions4.tooltip" [legend]="chartOptions4.legend"></apx-chart>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <!-- </div> -->
          </ng-template>
        </mat-tab>
        <mat-tab label="Delay/On Time Works Summary">
          <ng-template matTabContent>
            <!-- <div class="card shadow"> -->
              <div class="w-100 mt-1 ">
                <!-- #e2e3e5 -->
                <h3 class="bold text-light bg-dark" style="font-size: large;">Delay/On Time Works Summary</h3>
              </div>
            <div class="card-body pt-0">
              <!-- <div class="w-100 ">
                  #e2e3e5
                  <h3 class=" bold text-light bg-dark">Work Order Pending</h3>
                </div> -->
              <div class="container-fluid  p-1">
                <div class="row">
                  <div class="col-lg-6 col-md-6 mb-2 border rounded" *ngIf="RunningWorkDelayDataGTotal.length > 0">
                    <div class="chart-container">
                        <apx-chart [series]="chartOptions_I.series" [chart]="chartOptions_I.chart"
                        [dataLabels]="chartOptions_I.dataLabels" [plotOptions]="chartOptions_I.plotOptions"
                        [xaxis]="chartOptions_I.xaxis" [stroke]="chartOptions_I.stroke" [fill]="chartOptions_I.fill"
                        [yaxis]="chartOptions_I.yaxis" [title]="chartOptions_I.title" [tooltip]="chartOptions_I.tooltip"
                        [legend]="chartOptions_I.legend"></apx-chart>
                    </div>
                  </div>
                  <div class="col-lg-6 col-md-6 mb-2 border rounded" *ngIf="RunningWorkDelayDataDivision.length > 0">
                    <div class="chart-container">
                        <apx-chart [series]="chartOptions_II.series" [chart]="chartOptions_II.chart"
                        [dataLabels]="chartOptions2.dataLabels" [plotOptions]="chartOptions2.plotOptions"
                        [xaxis]="chartOptions_II.xaxis" [stroke]="chartOptions_II.stroke" [fill]="chartOptions_II.fill"
                        [yaxis]="chartOptions_II.yaxis" [title]="chartOptions_II.title" [tooltip]="chartOptions_II.tooltip"
                        [legend]="chartOptions_II.legend"></apx-chart>
                    </div>
                  </div>
                </div>
                 <div class="row">
                  <div class="col-lg-6 col-md-6 mb-2 border rounded" *ngIf="RunningWorkDelayDataScheme.length > 0">
                    <div class="chart-container">
                        <apx-chart [series]="chartOptions_III.series" [chart]="chartOptions_III.chart"
                        [dataLabels]="chartOptions_III.dataLabels" [plotOptions]="chartOptions_III.plotOptions"
                        [xaxis]="chartOptions_III.xaxis" [stroke]="chartOptions_III.stroke" [fill]="chartOptions_III.fill"
                        [yaxis]="chartOptions_III.yaxis" [title]="chartOptions_III.title"
                        [tooltip]="chartOptions_III.tooltip" [legend]="chartOptions_III.legend"></apx-chart>
                    </div>
                  </div>
                  <div class="col-lg-6 col-md-6 mb-2 border rounded" *ngIf="RunningWorkDelayDataDistrict.length > 0">
                    <div class="chart-container">
                        <apx-chart [series]="chartOptions_IV.series" [chart]="chartOptions_IV.chart"
                        [dataLabels]="chartOptions_IV.dataLabels" [plotOptions]="chartOptions_IV.plotOptions"
                        [xaxis]="chartOptions_IV.xaxis" [stroke]="chartOptions_IV.stroke"
                        [fill]="chartOptions_IV.fill" [yaxis]="chartOptions_IV.yaxis"
                        [title]="chartOptions_IV.title" [tooltip]="chartOptions_IV.tooltip"
                        [legend]="chartOptions_IV.legend"></apx-chart>
                    </div>
                  </div>
                  <div class="col-lg-6 col-md-6 mb-2 border rounded" *ngIf="RunningWorkDelayDataContractor.length > 0">
                    <div class="chart-container">
                        <apx-chart [series]="chartOptions_V.series" [chart]="chartOptions_V.chart"
                        [dataLabels]="chartOptions_V.dataLabels" [plotOptions]="chartOptions_V.plotOptions"
                        [xaxis]="chartOptions_V.xaxis" [stroke]="chartOptions_V.stroke"
                        [fill]="chartOptions_V.fill" [yaxis]="chartOptions_V.yaxis"
                        [title]="chartOptions_V.title" [tooltip]="chartOptions_V.tooltip"
                        [legend]="chartOptions_V.legend"></apx-chart>
                    </div>
                  </div>
                </div> 
                
              </div>
            </div>
            <!-- </div> -->
          </ng-template>
        </mat-tab>
      </mat-tab-group>
      <!-- </div> -->
    </div>
  </div>

  <!-- modle -->
  <ng-template class=" " #itemDetailsModal let-modal>
    <div class="row align-items-center p-2 m-2 ">
      <div class="col-lg-6 col-md-8">
        <h1 class="text-primary-emphasis"> Running Works  Delay/On Time Details</h1>
        <!-- <h1 class="text-primary-emphasis">Progress Level:<span class="text-primary"> {{name}}</span></h1> -->
        <h1 class="text-primary-emphasis">Selected Parameter: <span class="text-primary">{{selectname}} : {{selectedvalue}}</span></h1>
        <!-- <h1 class="text-primary-emphasis">Selected Parameter: <span class="text-primary">{{d_1_90Days}}</span></h1> -->
      </div>
      <div class="col-lg-6 col-md-4 text-end">
        <button type="button" class="btn-close" mat-button mat-dialog-close aria-label="Close"></button>
      </div>
    </div>
    <div class="" mat-dialog-content>
      <div class="row card shadow card-body ">
        <div class="d-flex justify-content-between align-items-center mb-0">
          <div class="filter-field flex-grow-1">
            <input type="text" class="form-control" placeholder="Filter" (keyup)="applyTextFilter($event)">
          </div>
          <div class="export-menu-container">
            <button type="button" class="btn border rounded btn-outline-secondary" mat-button
              [matMenuTriggerFor]="exportMenu">Export</button>
            <mat-menu #exportMenu="matMenu">
              <button mat-menu-item
                (click)="exporter.exportTable('xlsx', { fileName: 'RunningWDelay_OnTime', sheet: 'RunningWDelay_OnTime', Props: { Author: 'cgmsc' }})">Excel</button>
              <button mat-menu-item (click)="exporter.exportTable('csv')">CSV</button>
              <button mat-menu-item (click)="exporter.exportTable('json')">JSON</button>
              <button mat-menu-item (click)="exporter.exportTable('txt')">TXT</button>
              <button mat-menu-item (click)="exportToPDF()">PDF</button>
            </mat-menu>
          </div>
        </div>
  
        <div class="table-responsive ">
          <table class="table table-bordered table-striped border rounded " mat-table matTableExporter [dataSource]="dataSource"
            #exporter="matTableExporter" matSort #sort="matSort">
            <ng-container matColumnDef="sno">
              <th mat-header-cell *matHeaderCellDef mat-sort-header> S.No </th>
              <td mat-cell *matCellDef="let element"> {{ element.sno }} </td>
            </ng-container>
            <ng-container matColumnDef="work_id">
              <th mat-header-cell *matHeaderCellDef mat-sort-header>Work ID</th>
              <td mat-cell *matCellDef="let element">{{ element.work_id}}</td>
            </ng-container>
            <ng-container matColumnDef="head">
              <th mat-header-cell *matHeaderCellDef mat-sort-header>Head</th>
              <td mat-cell *matCellDef="let element">{{ element.head}} </td>
            </ng-container>
           
          
            <ng-container matColumnDef="divName_En">
              <th mat-header-cell *matHeaderCellDef mat-sort-header>Division</th>
              <td mat-cell *matCellDef="let element"> {{ element.divName_En}} </td>
            </ng-container>
            <ng-container matColumnDef="district">
              <th mat-header-cell *matHeaderCellDef mat-sort-header>District</th>
              <td mat-cell *matCellDef="let element"> {{ element.district}} </td>
            </ng-container>
            <ng-container matColumnDef="blockname">
              <th mat-header-cell *matHeaderCellDef mat-sort-header>Block</th>
              <td mat-cell *matCellDef="let element"> {{ element.blockname}} </td>
            </ng-container>
           
            <ng-container matColumnDef="work">
              <th mat-header-cell *matHeaderCellDef mat-sort-header>Work</th>
              <td mat-cell *matCellDef="let element">{{ element.work}} </td>
            </ng-container>
            
           
           
            <ng-container matColumnDef="workorderDT">
              <th mat-header-cell *matHeaderCellDef mat-sort-header>Work Order DT</th>
              <td mat-cell *matCellDef="let element"> {{ element.workorderDT}} </td>
            </ng-container>
            <ng-container matColumnDef="timeAllowed">
              <th mat-header-cell *matHeaderCellDef mat-sort-header>Time Allowed</th>
              <td mat-cell *matCellDef="let element"> {{ element.timeAllowed}} </td>
            </ng-container>
            <ng-container matColumnDef="dueDTTimePerAdded">
              <th mat-header-cell *matHeaderCellDef mat-sort-header>Due DT Completion</th>
              <td mat-cell *matCellDef="let element"> {{ element.dueDTTimePerAdded}} </td>
            </ng-container>
            <!-- selectedparameter -->
            <ng-container matColumnDef="delayDays">
              <th mat-header-cell *matHeaderCellDef mat-sort-header>Delay/On Time Days</th>
              <td mat-cell *matCellDef="let element" class="h5 font " [ngStyle]="{'color': selectedParameter === 'Delay' ? '#dc3545' : 
                     (selectedParameter === 'OnTime' ? ' #198754' : '#000')}">{{ element.delayDays }}</td>
              <!-- <td mat-cell *matCellDef="let element" [ngStyle]="{'color': selectedParameter === 'Delay' ? 'rgb(250, 87, 149)' : (selectedParameter === 'OnTime' ? 'rgb(98, 245, 98)' : '#00000')}"> {{ element.delayDays}} </td> -->
            </ng-container>
            <ng-container matColumnDef="lProgress">
              <th mat-header-cell *matHeaderCellDef mat-sort-header>Progress Level</th>
              <td mat-cell *matCellDef="let element"> {{ element.lProgress}} </td>
            </ng-container>
            <ng-container matColumnDef="progressDT">
              <th mat-header-cell *matHeaderCellDef mat-sort-header>Progress DT</th>
              <td mat-cell *matCellDef="let element"> {{ element.progressDT}} </td>
          </ng-container> 
          
         <ng-container matColumnDef="delayreason">
            <th mat-header-cell *matHeaderCellDef mat-sort-header>Delay Reason</th>
            <td mat-cell *matCellDef="let element"> {{ element.delayreason}} </td>
        </ng-container> 
        <ng-container matColumnDef="PRemarks">
          <th mat-header-cell *matHeaderCellDef mat-sort-header>Remarks</th>
          <td mat-cell *matCellDef="let element"> {{ element.PRemarks}}/{{ element.Remarks}}  </td>
      </ng-container> 
      <ng-container matColumnDef="expcompdt">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>Exp. Comp DT</th>
        <td mat-cell *matCellDef="let element"> {{ element.expcompdt}} </td>
    </ng-container>
         <!-- <ng-container matColumnDef="Remarks">
            <th mat-header-cell *matHeaderCellDef mat-sort-header>Remarks</th>
            <td mat-cell *matCellDef="let element"> {{ element.Remarks}} </td>
        </ng-container>  -->
       
            <ng-container matColumnDef="subengname">
              <th mat-header-cell *matHeaderCellDef mat-sort-header>Sub Eng</th>
              <td mat-cell *matCellDef="let element"> {{ element.subengname}} </td>
            </ng-container>
            <ng-container matColumnDef="aeName">
              <th mat-header-cell *matHeaderCellDef mat-sort-header>Asst.Eng</th>
              <td mat-cell *matCellDef="let element"> {{ element.aeName}} </td>
            </ng-container>
            <ng-container matColumnDef="aaDate">
              <th mat-header-cell *matHeaderCellDef mat-sort-header>AS Date</th>
              <td mat-cell *matCellDef="let element"> {{ element.aaDate}} </td>
            </ng-container>
          
            <ng-container matColumnDef="aaamt">
              <th mat-header-cell *matHeaderCellDef mat-sort-header>AS Amount(in Lacs)</th>
              <td mat-cell *matCellDef="let element"> {{ element.aaamt}} </td>
            </ng-container>
            <ng-container matColumnDef="tsDate">
              <th mat-header-cell *matHeaderCellDef mat-sort-header>TS Date</th>
              <td mat-cell *matCellDef="let element"> {{ element.tsDate}} </td>
            </ng-container>
          
            <ng-container matColumnDef="tsamt">
              <th mat-header-cell *matHeaderCellDef mat-sort-header>TS Amount(in Lacs)</th>
              <td mat-cell *matCellDef="let element"> {{ element.tsamt}} </td>
            </ng-container>
            <ng-container matColumnDef="tType">
              <th mat-header-cell *matHeaderCellDef mat-sort-header>Tender Type</th>
              <td mat-cell *matCellDef="let element"> {{ element.tType}} </td>
            </ng-container>
            <ng-container matColumnDef="tenderReference">
              <th mat-header-cell *matHeaderCellDef mat-sort-header>NIT Reference</th>
              <td mat-cell *matCellDef="let element">{{ element.tenderReference}} </td>
            </ng-container>
            <ng-container matColumnDef="dateOfIssueNIT">
              <th mat-header-cell *matHeaderCellDef mat-sort-header>NIT/Sanction DT</th>
              <td mat-cell *matCellDef="let element"> {{ element.dateOfIssueNIT}}/ {{ element.dateOfSanction}} </td>
            </ng-container>
            <ng-container matColumnDef="acceptanceLetterRefNo">
              <th mat-header-cell *matHeaderCellDef mat-sort-header>Acceptance Letter RefNo</th>
              <td mat-cell *matCellDef="let element"> {{ element.acceptanceLetterRefNo}} </td>
            </ng-container>
            <!-- <ng-container matColumnDef="agreementRefNo">
              <th mat-header-cell *matHeaderCellDef mat-sort-header>Work Order RefNo</th>
              <td mat-cell *matCellDef="let element"> {{ element.agreementRefNo}}/ {{ element.workorderRefNoGovt}}</td>
            </ng-container> -->
            <ng-container matColumnDef="acceptLetterDT">
              <th mat-header-cell *matHeaderCellDef mat-sort-header>Accepted DT</th>
              <td mat-cell *matCellDef="let element"> {{ element.acceptLetterDT}} </td>
            </ng-container>
            <!-- <ng-container matColumnDef="sanctionRate">
              <th mat-header-cell *matHeaderCellDef mat-sort-header>Rate%</th>
              <td mat-cell *matCellDef="let element"> {{ element.sanctionRate}} </td>
            </ng-container>
            <ng-container matColumnDef="sanctionDetail">
              <th mat-header-cell *matHeaderCellDef mat-sort-header>Sanction</th>
              <td mat-cell *matCellDef="let element"> {{ element.sanctionDetail}} </td>
            </ng-container>
            <ng-container matColumnDef="totalAmountOfContract">
              <th mat-header-cell *matHeaderCellDef mat-sort-header>Contract Value(In Lacs)</th>
              <td mat-cell *matCellDef="let element"> {{ element.totalAmountOfContract}} </td>
            </ng-container> -->
            <ng-container matColumnDef="contractorNAme">
              <th mat-header-cell *matHeaderCellDef mat-sort-header>Contractor</th>
              <td mat-cell *matCellDef="let element"> {{ element.contractorNAme}} </td>
            </ng-container>
            <ng-container matColumnDef="letterNo">
              <th mat-header-cell *matHeaderCellDef mat-sort-header>AS Letter NO</th>
              <td mat-cell *matCellDef="let element">{{ element.letterNo}} </td>
            </ng-container>
            <ng-container matColumnDef="approver">
              <th mat-header-cell *matHeaderCellDef mat-sort-header>Approver</th>
              <td mat-cell *matCellDef="let element">{{ element.approver}} </td>
            </ng-container>
            <ng-container matColumnDef="cid">
              <th mat-header-cell *matHeaderCellDef mat-sort-header>Contractor ID/Class</th>
              <td mat-cell *matCellDef="let element"> {{ element.cid}}/{{ element.regType}} </td>
            </ng-container>
           
            <ng-container matColumnDef="mobNo">
              <th mat-header-cell *matHeaderCellDef mat-sort-header>Contractor Mobile No</th>
              <td mat-cell *matCellDef="let element"> {{ element.mobNo}} </td>
            </ng-container>
            <ng-container matColumnDef="action">
              <th mat-header-cell *matHeaderCellDef>Download AS</th>
              <td mat-cell *matCellDef="let element">
                <span class="d-flex  flex-row-reverse p-2 ">
                  <button class="btn btn-light btn-sm btn-outline-secondary align-items-center border rounded" mat-button
                    (click)="onButtonClick2(0,element.work_id)">
                    <i class="bi bi-file-earmark-pdf me-0 bg-danger"></i>
                  </button>
                </span>
              </td>
            </ng-container>
            <tr mat-header-row
            *matHeaderRowDef="['sno','work_id','head','divName_En','district','blockname','work','workorderDT','timeAllowed','dueDTTimePerAdded','delayDays','lProgress','progressDT','delayreason','PRemarks','expcompdt','subengname','aeName','aaDate','aaamt','tsDate','tsamt','tType','tenderReference','dateOfIssueNIT','acceptanceLetterRefNo','acceptLetterDT','contractorNAme','letterNo','approver','cid','mobNo','action']">
            <!-- *matHeaderRowDef="['sno','work_id','head','district','blockname','work','workorderDT','timeAllowed','dueDTTimePerAdded','lProgress','progressDT','delayreason','PRemarks','expcompdt','subengname','aeName','aadt','asAmt','tsDate','tsamt','tType','tenderReference','dateOfIssueNIT','acceptanceLetterRefNo','agreementRefNo','acceptLetterDT','sanctionRate','sanctionDetail','totalAmountOfContract','contractorNAme','letterNo','approver','divName_En','cid','mobNo','action']"> -->
             </tr>
            <tr mat-row
              *matRowDef="let row; columns: ['sno','work_id','head','divName_En','district','blockname','work','workorderDT','timeAllowed','dueDTTimePerAdded','delayDays','lProgress','progressDT','delayreason','PRemarks','expcompdt','subengname','aeName','aaDate','aaamt','tsDate','tsamt','tType','tenderReference','dateOfIssueNIT','acceptanceLetterRefNo','acceptLetterDT','contractorNAme','letterNo','approver','cid','mobNo','action']">
              <!-- *matRowDef="let row; columns: ['sno','work_id','head','district','blockname','work','wrokOrderDT','timeAllowed','dueDTTimePerAdded','lProgress','progressDT','delayreason','PRemarks','expcompdt','subengname','aeName','aadt','asAmt','tsDate','tsamt','tType','tenderReference','dateOfIssueNIT','acceptanceLetterRefNo','agreementRefNo','acceptLetterDT','sanctionRate','sanctionDetail','totalAmountOfContract','contractorNAme','letterNo','approver','divName_En','cid','mobNo','action']"> -->
            </tr>
          </table>
          <mat-paginator #paginator [pageSizeOptions]="[5,10, 15, 30]" showFirstLastButtons></mat-paginator>
        </div>
      </div>
  
  
    </div>
    <div class="d-grid gap-2 col-12 mx-auto footer mt-1 p-2">
      <button mat-button mat-dialog-close  type="button" class="btn btn-info btn-lg" >
        <!-- mat-card-avatar  mat-card-avatar -->
        <mat-icon role="img" class="mat-icon notranslate  material-icons mat-icon-no-color" aria-hidden="true">
          exit_to_app
        </mat-icon>
      </button>
    </div> 
  </ng-template>